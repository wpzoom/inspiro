(r=>{r(document).ready(function(){var a,s;function n(){var e;a?a.show():(e=(()=>{var t=(t=(t=(t=(t='<div class="inspiro-deactivation-modal-overlay">')+'<div class="inspiro-deactivation-modal">'+'<div class="inspiro-deactivation-modal-header">')+("<h2>"+inspiroThemeDeactivateData.labels.title+"</h2>")+'<button class="inspiro-deactivation-modal-close">&times;</button>')+"</div>"+'<div class="inspiro-deactivation-modal-body">')+'<p class="inspiro-deactivation-intro">Please tell us why you\'re switching themes. Your feedback will help us make Inspiro Lite better for everyone!</p>'+'<form id="inspiro-deactivation-form">';inspiroThemeDeactivateData.choices.forEach(function(e){if(t=(t=(t=t+'<div class="inspiro-choice-wrapper">'+'<label class="inspiro-choice-label">')+('<input type="checkbox" name="deactivation_reason" value="'+e.slug+'" /> '))+e.label+"</label>",e.features_options){for(var i in t=t+'<div class="inspiro-features-options" style="margin-top: 12px; padding-left: 25px;">'+'<div style="margin-bottom: 8px; font-size: 13px; color: #111;">Which features? (Select all that apply)</div>',e.features_options)t=(t=t+'<label class="inspiro-feature-label" style="display: block; margin-bottom: 6px; font-size: 13px;"><input type="checkbox" name="missing_features" value="'+i+'" style="margin-right: 8px;" /> ')+e.features_options[i]+"</label>","other-feature"===i&&(t+='<textarea name="choice_missing_features_other_text" class="inspiro-feature-other-text" placeholder="Please specify..." rows="2" style="width: 100%; margin-top: 6px; margin-left: 20px; display: none;"></textarea>');t+="</div>"}else e.text_field&&(t+='<textarea name="'+e.text_field+'" class="inspiro-choice-text" placeholder="Please specify..." rows="2"></textarea>');t+="</div>"}),t+='<div class="inspiro-nps-section"><h3 style="margin: 20px 0 10px 0; font-size: 16px; color: #333;">One more quick question:</h3><p style="margin-bottom: 15px; color: #555;">How likely are you to recommend Inspiro to a friend or colleague?</p><div class="inspiro-nps-scale" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;"><span style="flex: 0 0 auto; font-size: 12px; color: #666; margin-right: 15px;">Not at all likely</span><div class="inspiro-nps-buttons" style="display: flex; gap: 8px;">';for(var e=0;e<=5;e++)t=(t=t+'<button type="button" class="inspiro-nps-btn" data-score="'+e+'" style="width: 40px; height: 40px; border: 1px solid #ddd; background: #fff; ')+'border-radius: 6px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s;">'+e+"</button>";return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t+="</div>")+'<span style="flex: 0 0 auto; font-size: 12px; color: #666; margin-left: 15px;">Extremely likely</span>'+"</div>")+'<div class="inspiro-nps-labels" style="display: flex; justify-content: space-between; font-size: 11px; color: #999; margin-bottom: 15px;">'+"<span>Unsatisfied</span><span>Neutral</span><span>Satisfied</span>")+"</div>"+"</div>")+"</form>"+"</div>")+'<div class="inspiro-deactivation-modal-footer">'+'<div class="inspiro-consent-section">')+'<label class="inspiro-consent-label">'+'<input type="checkbox" id="inspiro-consent-checkbox" checked /> ')+inspiroThemeDeactivateData.labels.consent_checkbox+"</label>")+"</div>"+'<div class="inspiro-privacy-notice">')+inspiroThemeDeactivateData.labels.privacy_disclaimer+"</div>")+'<div class="inspiro-modal-buttons">'+'<button class="inspiro-btn inspiro-btn-secondary" id="inspiro-skip-survey">')+inspiroThemeDeactivateData.labels.skip_deactivate)+"</button>"+'<button class="inspiro-btn inspiro-btn-primary" id="inspiro-submit-survey">')+inspiroThemeDeactivateData.labels.submit_deactivate+"</button>")+"</div>"+"</div>")+"</div>"+"</div>"})(),a=r(e),r("body").append(a),a.find(".inspiro-deactivation-modal-close").on("click",function(){i()}),a.find(".inspiro-deactivation-modal-overlay").on("click",function(e){e.target===this&&i()}),a.find('input[name="deactivation_reason"]').on("change",function(){var e=r(this).val(),i=r(this).is(":checked"),t=r(this).closest(".inspiro-choice-wrapper"),a=t.find(".inspiro-choice-text"),t=t.find(".inspiro-features-options");i?(-1===s.choices.indexOf(e)&&s.choices.push(e),a.show(),t.show()):(-1!==(i=s.choices.indexOf(e))&&s.choices.splice(i,1),a.hide().val(""),t.hide(),t.find('input[type="checkbox"]').prop("checked",!1),t.find(".inspiro-feature-other-text").hide().val(""),s.choice_missing_features="",s.choice_missing_features_other_text="")}),a.find('input[name="missing_features"]').on("change",function(){var e=[],i=(a.find('input[name="missing_features"]:checked').each(function(){e.push(r(this).val())}),s.choice_missing_features=e.join(","),"other-feature"===r(this).val()&&r(this).is(":checked")),t=r(this).closest(".inspiro-features-options").find(".inspiro-feature-other-text");i?t.show():"other-feature"===r(this).val()&&(t.hide().val(""),s.choice_missing_features_other_text="")}),a.find(".inspiro-choice-text, .inspiro-feature-other-text").on("input",function(){var e=r(this).attr("name");s[e]=r(this).val()}),a.find("#inspiro-consent-checkbox").on("change",function(){s.user_consent=r(this).is(":checked")}),a.find(".inspiro-nps-btn").on("click",function(){var e=parseInt(r(this).attr("data-score")),i=(s.nps_score=e,a.find(".inspiro-nps-btn").css({background:"#fff","border-color":"#ddd",color:"#333"}),"#007cba"),i=e<=2?"#dc3545":e<=3?"#ffc107":"#28a745";r(this).css({background:i,"border-color":i,color:"#fff"})}),a.find("#inspiro-skip-survey").on("click",function(){o()}),a.find("#inspiro-submit-survey").on("click",function(){r("#inspiro-submit-survey").prop("disabled",!0).text("Submitting...");var e={choices:s.choices.join(","),choice_technical_issues_text:s.choice_technical_issues_text||"",choice_plugin_compatibility_text:s.choice_plugin_compatibility_text||"",choice_missing_features:s.choice_missing_features||"",choice_missing_features_other_text:s.choice_missing_features_other_text||"",choice_lack_of_support_text:s.choice_lack_of_support_text||"",choice_other_text:s.choice_other_text||"",domain:s.domain,hostname:s.hostname,inspiro_theme_version:s.inspiro_theme_version,wp_version:s.wp_version,language:s.language,php_version:s.php_version,is_multisite:s.is_multisite,active_plugins_count:s.active_plugins_count,timezone_offset:s.timezone_offset,user_agent:s.user_agent,referrer:s.referrer,switching_to_theme:window.inspiroDestinationTheme||"Unknown",user_consent:s.user_consent,usage_duration_seconds:s.usage_duration_seconds,usage_duration_days:s.usage_duration_days,usage_duration_formatted:s.usage_duration_formatted,theme_activated_at:s.theme_activated_at,nps_score:s.nps_score};s.user_consent&&(e.admin_email=s.admin_email),r.ajax({url:inspiroThemeDeactivateData.ajaxUrl,type:"POST",data:{action:"inspiro_theme_deactivation_survey",nonce:inspiroThemeDeactivateData.nonce,...e}});var i,t=new FormData;for(i in e)e.hasOwnProperty(i)&&(Array.isArray(e[i])?t.append(i,JSON.stringify(e[i])):t.append(i,e[i]));r.ajax({url:inspiroThemeDeactivateData.remoteApiUrl,type:"POST",data:t,processData:!1,contentType:!1,timeout:5e3,success:function(e){o()},error:function(e,i,t){o()}})}),a.find(".inspiro-choice-text, .inspiro-features-options").hide())}function i(){a&&(a.remove(),a=null)}function o(){i(),window.inspiroDeactivationHref&&(window.location.href=window.inspiroDeactivationHref)}"undefined"!=typeof inspiroThemeDeactivateData&&(a=null,s={choices:[],domain:inspiroThemeDeactivateData.domain,hostname:inspiroThemeDeactivateData.hostname,inspiro_theme_version:inspiroThemeDeactivateData.inspiroThemeVersion,wp_version:inspiroThemeDeactivateData.wpVersion,language:document.documentElement.getAttribute("lang")||"en-US",php_version:inspiroThemeDeactivateData.phpVersion||"Unknown",is_multisite:inspiroThemeDeactivateData.isMultisite||!1,active_plugins_count:inspiroThemeDeactivateData.activePluginsCount||0,admin_email:inspiroThemeDeactivateData.adminEmail||"",timezone_offset:(new Date).getTimezoneOffset(),user_agent:navigator.userAgent,referrer:document.referrer||"Direct",user_consent:!0,usage_duration_seconds:inspiroThemeDeactivateData.usageData?inspiroThemeDeactivateData.usageData.usage_seconds:0,usage_duration_days:inspiroThemeDeactivateData.usageData?inspiroThemeDeactivateData.usageData.usage_days:0,usage_duration_formatted:inspiroThemeDeactivateData.usageData?inspiroThemeDeactivateData.usageData.formatted:"Unknown",theme_activated_at:inspiroThemeDeactivateData.usageData?inspiroThemeDeactivateData.usageData.activated_at:null,nps_score:null},inspiroThemeDeactivateData.choices.forEach(function(e){e.text_field&&(s[e.text_field]=""),e.features_options&&(s.choice_missing_features="",s.choice_missing_features_other_text="")}),r(document).on("click",'.theme-actions .activate, a[href*="action=activate"]',function(e){var i,t,a;i=r(".current-theme .theme-name").text(),t=r(".theme.active .theme-name").text(),a=r("body").attr("class")||"",!(i&&-1!==i.toLowerCase().indexOf("inspiro")||t&&-1!==t.toLowerCase().indexOf("inspiro")||-1!==a.indexOf("inspiro"))||(i=r(this).attr("href"))&&-1!==i.indexOf("action=install")||i&&(-1!==i.indexOf("customize.php")||-1!==i.indexOf("return="))||(t=r(this).text().trim().toLowerCase(),a=r(this).attr("class")||"",-1!==t.indexOf("preview"))||-1!==t.indexOf("live preview")||-1!==t.indexOf("customize")||-1!==a.indexOf("preview")||(t=r(this).closest(".theme").find(".theme-name").text())&&-1!==t.toLowerCase().indexOf("inspiro")||(window.inspiroDestinationTheme=((t=r(a=this).closest(".theme").find(".theme-name, .theme-title").text().trim())||(a=r(a).attr("href"))&&(a=(a=new URLSearchParams(a.split("?")[1])).get("stylesheet")||a.get("template"))&&(t=a.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())),t||"Unknown Theme"),e.preventDefault(),window.inspiroDeactivationHref=i,n())}),r(document).on("click",'a[href*="action=delete"]',function(e){var i=r(this).attr("href");-1===i.indexOf("stylesheet=inspiro")&&-1===i.indexOf("template=inspiro")||(e.preventDefault(),window.inspiroDeactivationHref=i,n())}))})})(jQuery);