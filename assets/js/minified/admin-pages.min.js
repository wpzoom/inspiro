jQuery(document).ready(l=>{l("#tabs").tabs({activate:function(e,t){t=t.newTab.find("a").attr("href");history.replaceState(null,null,t)}});let r="install_activate_inspiro_starter_sites_plugin";function s(e,t,a,i){var n=e[t].name;l.ajax({method:"POST",url:ajaxurl,data:{action:"inspiro_install_plugin",slug:n},beforeSend:function(){var e=l(".plugin-item-"+n);e.addClass("plugin-item--loading"),e.find("a.button").text("Installing...")}}).done(function(e){var t=l(".plugin-item-"+n);t.removeClass("plugin-item--loading"),e.success?(t.addClass("plugin-item--active"),t.find("input[type=checkbox]").prop("disabled",!0),t.find("a.button").text("Active"),t.find("a.button").addClass("button-disabled")):(-1===e.data.indexOf("<p>")&&(e.data="<p>"+e.data+"</p>"),t.find(".js-inspiro-plugin-item-error").append(e.data),t.find("input[type=checkbox]").prop("checked",!1),i=!0)}).fail(function(e){var t=l(".plugin-item-"+n);t.removeClass("plugin-item--loading"),t.find(".js-inpiro-plugin-item-error").append("<p>"+e.statusText+" ("+e.status+")</p>"),i=!0}).always(function(){++t===e.length?a.removeClass("inspiro-button-disabled"):s(e,t,a,i)})}l("#install-inspiro-starter-sites-btn").on("click",function(){var e,t,a,i,n=l(this),s=(n.addClass("button-disabled"),n.find("#install-inspiro-starter-sites-btn-text")),o=s.text(),d=s.data("installing-text"),d=(s.text(d),n.find(".dashicons-update.spin-icon"));d.removeClass("hidden-element"),e=n,t=s,a=o,i=d,l.ajax({url:ajaxurl,type:"POST",data:{action:r,plugin_slug:"inspiro-starter-sites"},success:()=>{i.addClass("hidden-element"),e.removeClass("button-disabled"),t.text(a),window.location.reload()},error:e=>{t.text(a)}})}),l("#wpz-notice-inspiro-plugin-handle").on("click",function(a){let i=l(this);var n=i.data("plugin-status");if("active"!==n){a.preventDefault();let t=i.text();n=inspiro_admin_pages_vars.installingText;let e=inspiro_admin_pages_vars.redirectingText;i.text(n),l.ajax({url:ajaxurl,type:"POST",data:{action:r,plugin_slug:"inspiro-starter-sites"},success:()=>{i.text(e),window.location=inspiro_admin_pages_vars.import_url},error:e=>{i.text(t)}})}}),l(".js-inspiro-plugin-item-button").on("click",function(e){e.preventDefault();var e=l(this),t=e.closest(".section_footer").find("input[type=checkbox]").serializeArray();if(console.log(t),0===t.length)return!1;s(t,0,e,!1)}),0===l(".wpz-grid-wrap .inspiro-plugin-item .section_footer input[type=checkbox]").serializeArray().length&&l(".js-inspiro-install-all-plugins").addClass("button-disabled"),l(".js-inspiro-install-all-plugins").on("click",function(e){e.preventDefault();var e=l(this),t=l(".wpz-grid-wrap .inspiro-plugin-item .section_footer input[type=checkbox]").serializeArray();if(0===t.length)return!1;e.addClass("button-disabled"),s(t,0,e,!1)}),l(".theme-buttons.filters a").on("click",function(e){e.preventDefault();var e=l(this),e=(l(".theme-buttons.filters a").removeClass("active"),e.addClass("active"),l(this).data("filter")),t=l(".wpz-onboard_content-main-step-content.premium ul li[data-design-id]"),a=l(".wpz-onboard_content-main-step-content.premium ul li[data-design-id].gutenberg"),i=l(".wpz-onboard_content-main-step-content.premium ul li[data-design-id].elementor");"*"===e?t.removeClass("fade-out").addClass("fade-in"):"gutenberg"===e?(i.removeClass("fade-in").addClass("fade-out"),a.removeClass("fade-out").addClass("fade-in")):"elementor"===e&&(a.removeClass("fade-in").addClass("fade-out"),i.removeClass("fade-out").addClass("fade-in"))}),l(".wpz-onboard_content-main-steps").on("click","li[data-import-id] figure",function(e){var t;l(e.target).is("a")||l(e.target).closest("a").length||(e.preventDefault(),e.stopPropagation(),t=(e=l(this).closest("li[data-import-id]")).data("import-id"),e.hasClass("selected-demo")?(e.removeClass("selected-demo"),l.ajax({url:ajaxurl,type:"POST",data:{action:"inspiro_save_selected_demo",demo_id:"",nonce:inspiro_admin_pages_vars.nonce}})):(l(".wpz-onboard_content-main-steps li[data-import-id]").removeClass("selected-demo"),e.addClass("selected-demo"),l.ajax({url:ajaxurl,type:"POST",data:{action:"inspiro_save_selected_demo",demo_id:t,nonce:inspiro_admin_pages_vars.nonce},success:function(e){e.success&&(e=l('<div class="demo-selected-notification">Demo layout applied! Refresh your site to see the changes.</div>'),l("body").append(e),e.fadeIn(300).delay(3e3).fadeOut(300,function(){l(this).remove()}))}})))}),l(document).ready(function(){let i=inspiro_admin_pages_vars.selected_demo;i&&l(".wpz-onboard_content-main-steps li[data-import-id]").each(function(){var e=l(this),t=e.data("import-id");let a="";t&&(0===t.indexOf("inspiro-lite-")?a=t.replace("inspiro-lite-",""):0===t.indexOf("inspiro-")&&(a=t.replace("inspiro-",""))),a===i&&e.addClass("selected-demo")})})}),(e=>{let n=e(".wpz-onboard_wrapper");e(function(e){var t,a,i;window.location.hash&&(t=window.location.hash)&&(a=n.find('#wpz-onboard_tabs .wpz-onboard_tab a[href="'+t+'"]'),i=a.closest(".wpz-onboard_wrapper").find(".wpz-onboard_content .wpz-onboard_content-main .wpz-onboard_content-main-tab"),a.closest("#wpz-onboard_tabs").find(".wpz-onboard_tab").removeClass("active"),a.closest(".wpz-onboard_tab").addClass("active"),i.removeClass("active"),i.filter('[data-id="'+t+'"]').addClass("active"))})})(jQuery);